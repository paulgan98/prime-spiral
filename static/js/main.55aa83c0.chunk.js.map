{"version":3,"sources":["components/canvas.js","spiralMethods.js","components/controlPanel.js","App.js","index.js"],"names":["STEPSIZE","STEPSCALE","CIRCLESIZE","Canvas","props","canvasRef","useRef","canvas","_ref","windowDims","Width","Height","scale","window","devicePixelRatio","_useState","useState","_useState2","Object","slicedToArray","isMouseDown","setMouseDown","_useState3","x","y","_useState4","mousePos","setMousePos","_useState5","_useState6","transformedMousePos","setTransformedMousePos","_useState7","_useState8","selectedNumber","setSelectedNumber","_useState9","_useState10","scaleFactor","setScaleFactor","_useState11","_useState12","centerBool","setCenterBool","_useState13","_useState14","transform","setTransform","updateMousePositions","e","rect","getBoundingClientRect","clientX","left","clientY","top","handleMouseDown","handleMouseUp","handleMouseMove","preventDefault","xDiff","yDiff","temp","toConsumableArray","handlePan","handleZoom","s","deltaY","Math","min","max","handleMouseLeave","draw","ctx","clearRect","width","height","apply","showSpiral","n","arr","curr","next","i","length","p1","p2","j","diffVec","drawLine","drawSpiral","spiralLength","spiralCorners","selected","coord","isInCircle","drawCircle","toString","color","crazyMode","colors","drawPrimes","nPrimes","primesPos","font","concat","fillStyle","fillText","useEffect","current","context","w","h","cv","style","getContext","createHiPPICanvas","centerCanvasBool","setCenterCanvasBool","centerCanvas","addEventListener","removeEventListener","react_default","a","createElement","ref","className","size","beginPath","arc","PI","fill","strokeStyle","lineWidth","lineCap","moveTo","lineTo","stroke","p","circle","r","pow","getPrimes","isPrime","push","buildSpiral","dataArray","axisAndDir","_dataArray","adPtr","steps","counter","axis","delta","makePrimesArr","primes","ptr","interval","abs","numPrimes","ControlPanel","updateSpiralImage","setSpiralLength","setSpiralCorners","spiral","dataArr","setPrimes","setNPrimes","setPrimesPos","checkValidInput","MAXLENGTH","onClick","id","type","value","defaultValue","onInput","inp","document","getElementById","v","parseInt","elem","innerHTML","setShowSpiral","setCrazyMode","setColors","generateRandomColors","SPIRALLENGTH","App","innerWidth","innerHeight","setWindowDims","_useState15","_useState16","_useState17","_useState18","_useState19","_useState20","_colors","_useState21","_useState22","handleResize","randomColor","floor","random","components_canvas","controlPanel","ReactDOM","render","StrictMode","src_App"],"mappings":"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","file":"static/js/main.55aa83c0.chunk.js","sourcesContent":["import React, { useRef, useEffect, useState } from \"react\";\nimport \"../App.css\";\n\nvar STEPSIZE = 15; // distance between current and next point\nvar STEPSCALE = 3; // scalar for STEPSIZE\nvar CIRCLESIZE = (STEPSIZE * STEPSCALE) / 5;\n\nfunction Canvas(props) {\n  // canvas variables\n  const canvasRef = useRef(null);\n  var canvas = null;\n  var [Width, Height] = [props.windowDims.Width, props.windowDims.Height];\n  const scale = window.devicePixelRatio || 1;\n\n  // state hooks\n  const [isMouseDown, setMouseDown] = useState(0);\n  const [mousePos, setMousePos] = useState({ x: 0, y: 0 });\n  const [transformedMousePos, setTransformedMousePos] = useState([0, 0]);\n  const [selectedNumber, setSelectedNumber] = useState(\"\");\n  const [scaleFactor, setScaleFactor] = useState(1); // how much to scale canvas by\n  const [centerBool, setCenterBool] = useState(false);\n  const [transform, setTransform] = useState([\n    1,\n    0,\n    0,\n    1,\n    (props.windowDims.Width * scale) / 2,\n    (props.windowDims.Height * scale) / 2,\n  ]);\n\n  // create HD canvas\n  function createHiPPICanvas(w, h) {\n    let cv = canvasRef.current;\n    cv.width = w * scale;\n    cv.height = h * scale;\n    cv.style.width = w + \"px\";\n    cv.style.height = h + \"px\";\n    cv.getContext(\"2d\").scale(scale, scale);\n    return cv;\n  }\n\n  const centerCanvas = () => {\n    setCenterBool(true);\n    const temp = [...transform];\n    temp[4] = (props.windowDims.Width / 2) * scale;\n    temp[5] = (props.windowDims.Height / 2) * scale;\n    setTransform(temp);\n    props.setCenterCanvasBool(false);\n  };\n\n  // updates relative and absolute mouse positions\n  const updateMousePositions = (e) => {\n    var rect = canvas.getBoundingClientRect();\n    setMousePos({\n      x: (e.clientX - rect.left) * scale,\n      y: (e.clientY - rect.top) * scale,\n    });\n    setTransformedMousePos([\n      (mousePos.x - transform[4]) / transform[0],\n      (mousePos.y - transform[5]) / transform[3],\n    ]);\n  };\n\n  const handleMouseDown = (e) => {\n    setMouseDown(1);\n  };\n\n  const handleMouseUp = (e) => {\n    setMouseDown(0);\n  };\n\n  // handles panning\n  const handlePan = (e) => {\n    e.preventDefault();\n    // calculate how much mouse moved\n    var rect = canvas.getBoundingClientRect();\n    const xDiff = (e.clientX - rect.left) * scale - mousePos.x;\n    const yDiff = (e.clientY - rect.top) * scale - mousePos.y;\n\n    const temp = [...transform];\n    temp[4] = temp[4] + xDiff;\n    temp[5] = temp[5] + yDiff;\n\n    setTransform(temp);\n    updateMousePositions(e);\n  };\n\n  // sets mouse position\n  const handleMouseMove = (e) => {\n    updateMousePositions(e);\n    if (isMouseDown) {\n      handlePan(e);\n    }\n  };\n\n  const handleZoom = (e) => {\n    e.preventDefault();\n    updateMousePositions(e);\n    const zoomSpeed = 0.001;\n    var s = scaleFactor + e.deltaY * -zoomSpeed;\n    s = Math.min(Math.max(0.05, s), 7);\n    if (scaleFactor !== s) {\n      const temp = transform;\n      temp[0] = s;\n      temp[3] = s;\n      temp[4] = mousePos.x - (mousePos.x - transform[4]) * (s / scaleFactor);\n      temp[5] = mousePos.y - (mousePos.y - transform[5]) * (s / scaleFactor);\n      setScaleFactor(s);\n      setTransform(temp);\n    }\n  };\n\n  const handleMouseLeave = (e) => {\n    var rect = canvas.getBoundingClientRect();\n    if (\n      e.clientX <= rect.left ||\n      e.clientY <= rect.top ||\n      e.clientX >= Width ||\n      e.clientY >= Height\n    ) {\n      setMouseDown(0);\n    }\n  };\n\n  // draw all circles based on arr\n  const drawPrimes = (n, arr, ctx) => {\n    var selected = false;\n    for (let i = 0; i < n; i++) {\n      let coord = [...arr[i]];\n      for (let j = 0; j < 2; j++) {\n        coord[j] *= STEPSIZE * STEPSCALE;\n      }\n      if (!isInCircle(transformedMousePos, coord, CIRCLESIZE + 2)) {\n        const color = props.crazyMode ? props.colors[i] : \"black\";\n        drawCircle(coord[0], coord[1], CIRCLESIZE, color, ctx);\n      } else {\n        // mouse is in circle\n        drawCircle(coord[0], coord[1], CIRCLESIZE, \"red\", ctx);\n        selected = true;\n        setSelectedNumber(coord[2].toString());\n      }\n    }\n    if (!selected) {\n      setSelectedNumber(\"\");\n    }\n  };\n\n  // draw on canvas\n  const draw = (ctx) => {\n    ctx.setTransform(1, 0, 0, 1, 0, 0);\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.setTransform(...transform);\n\n    if (props.showSpiral) {\n      drawSpiral(props.spiralLength, props.spiralCorners, ctx); // draw spiral lines\n    }\n    drawPrimes(props.nPrimes, props.primesPos, ctx); // draw circles\n\n    // show selected number\n    ctx.font = `${(20 / transform[0]) * scale}px Arial`;\n    ctx.fillStyle = \"#03C04A\";\n    ctx.fillText(\n      selectedNumber,\n      transformedMousePos[0] + 10,\n      transformedMousePos[1] - 10\n    );\n  };\n\n  useEffect(() => {\n    canvas = canvasRef.current;\n    canvas = createHiPPICanvas(props.windowDims.Width, props.windowDims.Height);\n\n    const context = canvas.getContext(\"2d\");\n    draw(context); // draw on canvas\n\n    if (props.centerCanvasBool === true) {\n      centerCanvas();\n    }\n\n    canvas.addEventListener(\"mousedown\", handleMouseDown);\n    canvas.addEventListener(\"touchstart\", handleMouseDown);\n    canvas.addEventListener(\"mouseup\", handleMouseUp);\n    canvas.addEventListener(\"touchend\", handleMouseUp);\n    canvas.addEventListener(\"mousemove\", handleMouseMove);\n    canvas.addEventListener(\"touchmove\", handleMouseMove);\n    canvas.addEventListener(\"wheel\", handleZoom);\n    canvas.addEventListener(\"mouseleave\", handleMouseLeave);\n\n    return () => {\n      canvas.removeEventListener(\"mousedown\", handleMouseDown);\n      canvas.removeEventListener(\"touchstart\", handleMouseDown);\n      canvas.removeEventListener(\"mouseup\", handleMouseUp);\n      canvas.removeEventListener(\"touchend\", handleMouseUp);\n      canvas.removeEventListener(\"mousemove\", handleMouseMove);\n      canvas.removeEventListener(\"touchmove\", handleMouseMove);\n      canvas.removeEventListener(\"wheel\", handleZoom);\n      canvas.removeEventListener(\"mouseleave\", handleMouseLeave);\n    };\n  }, [\n    isMouseDown,\n    props.spiralLength,\n    props.windowDims,\n    props.centerCanvasBool,\n    props.showSpiral,\n    props.crazyMode,\n    scaleFactor,\n    centerBool,\n    transform,\n    transformedMousePos,\n    selectedNumber,\n  ]);\n  return <canvas ref={canvasRef} className=\"Canvas\" />;\n}\n\nexport default Canvas;\n\n// draw function declarations\n\n// draw circle at (x, y)\nfunction drawCircle(x, y, size, color, ctx) {\n  ctx.beginPath();\n  ctx.arc(x, y, size, 0, 2 * Math.PI);\n  ctx.fillStyle = color;\n  ctx.fill();\n}\n\n// draw line between point 1 and point 2\nfunction drawLine(p1, p2, ctx) {\n  ctx.strokeStyle = \"#D0D0D0\"; // grey\n  ctx.lineWidth = Math.max(1, (STEPSIZE * STEPSCALE) / 12);\n  ctx.lineCap = \"round\";\n  ctx.beginPath();\n  ctx.moveTo(p1[0], p1[1]);\n  ctx.lineTo(p2[0], p2[1]);\n  ctx.stroke();\n}\n\n// draw spiral lines from array of corner coords [x, y]\nfunction drawSpiral(n, arr, ctx) {\n  var curr = arr[0];\n  var next = null;\n  for (let i = 1; i < arr.length; i++) {\n    next = arr[i];\n    let p1 = [...curr];\n    let p2 = [...next];\n    for (let j = 0; j < 2; j++) {\n      p1[j] *= STEPSIZE * STEPSCALE;\n      p2[j] *= STEPSIZE * STEPSCALE;\n    }\n    // if next corner point is longer than what we need\n    if (next[2] > n) {\n      let s = (n - curr[2]) / (next[2] - curr[2]);\n      let diffVec = [(p2[0] - p1[0]) * s, (p2[1] - p1[1]) * s];\n      drawLine(p1, [p1[0] + diffVec[0], p1[1] + diffVec[1]], ctx);\n      break;\n    } else {\n      drawLine(p1, p2, ctx);\n      curr = next;\n    }\n  }\n}\n\nfunction isInCircle(p, circle, r) {\n  // (x-h)^2 + (y-k)^2 ≤ r^2\n  if (\n    Math.pow(p[0] - circle[0], 2) + Math.pow(p[1] - circle[1], 2) <=\n    Math.pow(r, 2)\n  ) {\n    return true;\n  } else {\n    return false;\n  }\n}\n","// Contains all functions used to build spiral and prime numbers\n// return all prime numbers until n\nexport function getPrimes(n, arr) {\n  // already calculated, return arr\n  if (n <= arr[arr.length - 1]) {\n    return arr;\n  }\n  // else build\n  var start = Math.max(3, arr[arr.length - 1]);\n  for (let i = start; i <= n; i += 2) {\n    let isPrime = 1;\n    for (let j = 0; j < arr.length; j++) {\n      if (i % arr[j] === 0) {\n        isPrime = 0;\n        break;\n      }\n    }\n    if (isPrime) {\n      arr.push(i);\n    }\n  }\n  return arr;\n}\n\n// arr: spiral corners array [x_rel, y_rel, number]\n// dataArr: [adPtr, steps, counter, i]\n// build array of RELATIVE POSITIONS of all corner coords in spiral\nexport function buildSpiral(n, arr, dataArray) {\n  // if arr already built\n  if (n <= dataArray[3] - 1) {\n    return arr;\n  }\n\n  // else build array\n  // initialize spiral variables\n  const axisAndDir = [\n    [0, 1],\n    [1, -1],\n    [0, -1],\n    [1, 1],\n  ]; // Dir=1 right/down, Dir=-1 left/up\n\n  // adPtr: ptr for axisAndDir 0-3\n  // steps: how many steps to take; increases every 2 direction changes\n  // counter: each value of 'steps' occurs twice, then direction change\n  // i: current number being built\n  var [adPtr, steps, counter, i] = dataArray;\n\n  while (i <= n) {\n    var axis = axisAndDir[adPtr][0];\n    var delta = axisAndDir[adPtr][1];\n    let temp = [...arr[arr.length - 1]]; // temp is last element of arr\n    temp[axis] += steps * delta;\n    temp[2] += steps;\n    arr.push(temp);\n\n    // update variables\n    counter--;\n    i += steps;\n    if (counter === 0) {\n      counter = 2;\n      steps++;\n    }\n    adPtr++;\n    adPtr = adPtr > 3 ? 0 : adPtr; // if out of bounds, point back to first\n  }\n  // update dataArray\n  var temp = [adPtr, steps, counter, i];\n  for (let j = 0; j < dataArray.length; j++) {\n    dataArray[j] = temp[j];\n  }\n  return arr;\n}\n\n// make array of relative coords of all prime numbers\nexport function makePrimesArr(n, spiralCorners, primes) {\n  const arr = []; // return this\n  var ptr = 0; // point to primes array\n  for (let i = 1; i < spiralCorners.length; i++) {\n    let p1 = [...spiralCorners[i - 1]];\n    let p2 = [...spiralCorners[i]];\n    var interval = p2[2] - p1[2];\n    while (primes[ptr] > p1[2] && primes[ptr] <= p2[2]) {\n      let temp = [...p1];\n      let delta = (primes[ptr] - p1[2]) / interval;\n      let diffVec = [(p2[0] - p1[0]) * delta, (p2[1] - p1[1]) * delta];\n      temp[0] += diffVec[0];\n      temp[1] += diffVec[1];\n      temp[2] += Math.abs(diffVec[0]) + Math.abs(diffVec[1]);\n      arr.push(temp);\n      ptr++;\n    }\n  }\n  return arr;\n}\n\n// return number of prime numbers until n\nexport const numPrimes = (n, primes) => {\n  if (n > primes[primes.length - 1]) {\n    primes = getPrimes(n, primes);\n  }\n  var ptr = 0;\n  while (primes[ptr] <= n) {\n    ptr++;\n  }\n  return ptr;\n};\n","import React from \"react\";\nimport * as spiral from \"../spiralMethods\";\nimport { MAXLENGTH } from \"../App\";\n\n// Controls component for modifying Canvas\nfunction ControlPanel(props) {\n  // update function to be called only when spiral length changes\n  const updateSpiralImage = (n) => {\n    props.setSpiralLength(n);\n    props.setSpiralCorners(\n      spiral.buildSpiral(n, props.spiralCorners, props.dataArr)\n    );\n    props.setPrimes(spiral.getPrimes(n, props.primes));\n    props.setNPrimes(spiral.numPrimes(n, props.primes));\n    props.setPrimesPos(\n      spiral.makePrimesArr(n, props.spiralCorners, props.primes)\n    );\n  };\n\n  const handleSpiralLengthInput = () => {\n    var inp = document.getElementById(\"Spiral-length-input\");\n    let v = parseInt(inp.value) || 1;\n    v = checkValidInput(v);\n    updateSpiralImage(v);\n  };\n\n  const checkValidInput = (n) => {\n    return Math.min(Math.max(1, n), MAXLENGTH);\n  };\n\n  const centerCanvas = () => props.setCenterCanvasBool(true);\n\n  const toggleShowSpiral = () => {\n    var elem = document.getElementById(\"Show-spiral-button\");\n    if (props.showSpiral) {\n      elem.innerHTML = \"Show Spiral\";\n      props.setShowSpiral(false);\n    } else {\n      elem.innerHTML = \"Hide Spiral\";\n      props.setShowSpiral(true);\n    }\n  };\n\n  const toggleCrazyMode = () => {\n    const elem = document.getElementById(\"Crazy-mode-button\");\n    if (props.crazyMode) {\n      elem.innerHTML = \"Crazy Mode\";\n      props.setCrazyMode(false);\n    } else {\n      elem.innerHTML = \"Normal Mode\";\n      props.setCrazyMode(true);\n      props.setColors(props.generateRandomColors);\n    }\n  };\n\n  return (\n    <div className=\"Controls-div\">\n      <button\n        className=\"Button-short\"\n        onClick={() => {\n          updateSpiralImage(checkValidInput(props.spiralLength - 1));\n        }}\n      >\n        ▼\n      </button>\n      <input\n        className=\"Spiral-length-input\"\n        id=\"Spiral-length-input\"\n        type=\"quantity\"\n        value={props.spiralLength}\n        defaultValue=\"1\"\n        onInput={handleSpiralLengthInput}\n      ></input>\n      <button\n        className=\"Button-short\"\n        onClick={() => {\n          updateSpiralImage(checkValidInput(props.spiralLength + 1));\n        }}\n      >\n        ▲\n      </button>\n      <button\n        className=\"Button-max\"\n        onClick={() => {\n          updateSpiralImage(MAXLENGTH);\n        }}\n      >\n        Max\n      </button>\n      <button className=\"Button-long\" onClick={centerCanvas}>\n        Center\n      </button>\n      <div className=\"Controls-div\">\n        <button\n          className=\"Button-longer\"\n          id=\"Show-spiral-button\"\n          onClick={toggleShowSpiral}\n        >\n          Hide Spiral\n        </button>\n        <button\n          id=\"Crazy-mode-button\"\n          className=\"Button-longer\"\n          onClick={toggleCrazyMode}\n        >\n          Crazy Mode\n        </button>\n      </div>\n    </div>\n  );\n}\nexport default ControlPanel;\n","import React, { useEffect, useState } from \"react\";\nimport Canvas from \"./components/canvas.js\";\nimport ControlPanel from \"./components/controlPanel\";\nimport * as spiral from \"./spiralMethods\";\nimport \"./App.css\";\n\n//              App\n//            /     \\\n//  ControlPanel     Canvas\n\nvar SPIRALLENGTH = 2000;\nexport const MAXLENGTH = 1000000;\n\nfunction App() {\n  // State hooks; will be passed as props to ControlPanel and Canvas\n\n  // [adPtr, steps, counter, i]\n  const [dataArr, _] = useState([0, 1, 2, 2]);\n  const [spiralLength, setSpiralLength] = useState(SPIRALLENGTH);\n  const [primes, setPrimes] = useState(spiral.getPrimes(SPIRALLENGTH, [2]));\n  const [spiralCorners, setSpiralCorners] = useState(\n    spiral.buildSpiral(SPIRALLENGTH, [[0, 0, 1]], dataArr)\n  );\n  const [primesPos, setPrimesPos] = useState(\n    spiral.makePrimesArr(SPIRALLENGTH, spiralCorners, primes)\n  );\n  const [nPrimes, setNPrimes] = useState(\n    spiral.numPrimes(SPIRALLENGTH, primes)\n  );\n  // canvas dimensions\n  const [windowDims, setWindowDims] = useState({\n    Width: window.innerWidth - 60,\n    Height: window.innerHeight - 160,\n  });\n  const [centerCanvasBool, setCenterCanvasBool] = useState(false);\n  const [showSpiral, setShowSpiral] = useState(true);\n  const [crazyMode, setCrazyMode] = useState(false);\n\n  const _colors = generateRandomColors;\n  const [colors, setColors] = useState(_colors);\n\n  // Methods\n  const handleResize = () => {\n    setWindowDims({\n      Width: window.innerWidth - 60,\n      Height: window.innerHeight - 160,\n    });\n  };\n\n  const generateRandomColors = () => {\n    var colors = [];\n    for (let i = 0; i < spiralLength; i++) {\n      const randomColor = \"#\".concat(\n        Math.floor(Math.random() * 16777215).toString(16)\n      );\n      colors.push(randomColor);\n    }\n    return colors;\n  };\n\n  useEffect(() => {\n    window.addEventListener(\"resize\", handleResize);\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  return (\n    <div className=\"Div1\">\n      <h1 className=\"Title\">The Prime Spiral</h1>\n      <p className=\"By-text\"> A React app by Paul Gan</p>\n      <Canvas\n        className=\"Canvas\"\n        spiralLength={spiralLength}\n        primesPos={primesPos}\n        nPrimes={nPrimes}\n        spiralCorners={spiralCorners}\n        windowDims={windowDims}\n        centerCanvasBool={centerCanvasBool}\n        setCenterCanvasBool={setCenterCanvasBool}\n        showSpiral={showSpiral}\n        crazyMode={crazyMode}\n        colors={colors}\n      />\n      <ControlPanel\n        spiralLength={spiralLength}\n        primesPos={primesPos}\n        nPrimes={nPrimes}\n        spiralCorners={spiralCorners}\n        primes={primes}\n        dataArr={dataArr}\n        setSpiralLength={setSpiralLength}\n        setPrimesPos={setPrimesPos}\n        setNPrimes={setNPrimes}\n        setSpiralCorners={setSpiralCorners}\n        setPrimes={setPrimes}\n        windowDims={windowDims}\n        setCenterCanvasBool={setCenterCanvasBool}\n        showSpiral={showSpiral}\n        setShowSpiral={setShowSpiral}\n        crazyMode={crazyMode}\n        setCrazyMode={setCrazyMode}\n        setColors={setColors}\n        generateRandomColors={generateRandomColors}\n      />\n    </div>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}